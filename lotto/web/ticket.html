<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <title>Sell Ticket</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link href="sticky-footer.css" rel="stylesheet" />
    <link rel="shortcut icon" href="money.ico" type="image/x-icon">
    <script type="text/javascript" src="/eel.js"></script>
    <script type="text/javascript">
        function setNames(nameList) {
            var select = document.getElementById("Names")
            for (var i = 0; i < nameList.length; i++) {
                var opt = nameList[i];
                var el = document.createElement("option");
                el.textContent = opt;
                el.value = opt;
                select.appendChild(el);
            }
        }

        eel.getUserNames()(setNames);

        function makeTicket() {
            var numberOfTickets = document.getElementById("ticketNums").value;
            var name = document.getElementById("Names").value;
            var obj = {
                numberOfTickets: numberOfTickets,
                name: name
            };
            eel.makeTicket(obj)();
        }

        function addUser() {
            var txt;
            var person = prompt("Please enter the users name:", "");
            if (person == null || person == "") {
                txt = "User cancelled the prompt.";
            } else {
                eel.addUser(person)();
                location.reload();
            }
        }

    </script>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">Lottery</a>
            </div>
            <ul class="nav navbar-nav">
                <li class="active"><a href="ticket.html">Sell a Ticket</a></li>
                <li><a href="viewTickets.html">View Sold Tickets</a></li>
                <li><a href="runLottery.html">Run the Lottery</a></li>
            </ul>
        </div>
    </nav>


</head>

<body>
    <form onsubmit="makeTicket()">
        <div class="form-group">
            <label> Number of Tickets:</label>
            <select class="form-control form-control-lg" id="ticketNums" required>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
                <option>9</option>
                <option>10</option>
            </select>
        </div>
        <div class="form-group">
            <label> Name:</label>
            <select class="form-control form-control-lg" id="Names" required>
                <option></option>
            </select>
        </div>
        <div class="col text-center">
            <button type="submit" class="btn btn-primary btn-lg">Create Tickets</button>
        </div>
        <div class="col text-center">
            <p><i><br />Each ticket costs $5 and has a 1:121 chance of winning.</i></p>
            <p><i>No duplicates, each ticket sold has unique numbers.</i></p>
        </div>
    </form>
</body>

<footer class="footer">
    <div class="container">
        <span class="text-muted">Created by Taylor Sahli</span>
        <a type="button" class="btn btn-light" onclick="addUser();">Add a User</a>
    </div>
</footer>

</html>